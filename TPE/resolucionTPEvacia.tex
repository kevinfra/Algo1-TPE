\documentclass[spanish,a4paper]{article} 

\usepackage{babel}
\usepackage{soul}
\usepackage[latin1]{inputenc}
%\usepackage{bbm}
\usepackage{framed}
\input{../macros/Algo1Macros}




\begin{document}

\materia{Algoritmos y Estructura de Datos I}
\cuatrimestre{1}
\anio{2015}

\fecha{1 de Abril de 2015}

\nombre{\LARGE TPE - Flores vs Vampiros}

\titulotp


\section{Tipos}

\input{tipos/tipos.tex}

\section{Flor}
\input{tipos/flor.tex}

\begin{problema}{nuevaF}{v : \ent, cP : \ent, hs : [Habilidad]}{Flor}
	\requiere[habilidadesCoherentes]{sinRepetidos(hs)}
	\requiere[viveDelInvariante]{v == \frac{100}{|hs|+1} }
	\requiere[pegameSinVariar]{if \ Atacar \in habilidades(f) \ Then \ cP == \frac{12}{|hs|} \ Else \ cP == 0}
	\asegura[tendriaHabilidades]{mismos(habilidades(res),hs)}
	\asegura[tieneVida]{vida(res) == v}
	\asegura[siAtacaTePega]{cuantoPega(res) == cP}
\end{problema}

\begin{problema}{vidaF}{f: Flor}{\ent}
	\asegura{res == vida(f)}
\end{problema}

\begin{problema}{cuantoPegaF}{f: Flor}{\ent}
	\asegura{res == cuantoPega(f)}
\end{problema}

\begin{problema}{habilidadesF}{f: Flor}{[Habilidad]}
	\asegura{res == habilidades(f)}
\end{problema}



\section{Vampiro}
\input{tipos/vampiro.tex}

\newpage

\begin{problema}{nuevoV}{cv : ClaseVampiro, v : \ent, cP : \ent}{Vampiro}
	\requiere{v \geq 0 \ \land v \leq 100}
	\requiere{cP > 0}
	\asegura[tieneVida]{vida(res) == v}
	\asegura[estePega]{cuantoPega(res) == cP}
	\asegura[esVampiro]{clase(res) == cv}
\end{problema}

\begin{problema}{claseVampiroV}{v : Vampiro}{ClaseVampiro}
	\asegura{res==clase(v)}
\end{problema}

\begin{problema}{vidaV}{v : Vampiro}{\ent}
	\asegura{res==vida(v)}
\end{problema}

\begin{problema}{cuantoPegaV}{v : Vampiro}{\ent}
	\asegura{res==cuantoPega(v)}
\end{problema}

% problemas igual a Flor

\section{Nivel}
\input{tipos/nivel.tex}

\begin{problema}{nuevoN}{an : \ent, al : \ent, s : \ent, spaw : [(Vampiro, \ent, \ent)]}{Nivel}
	\requiere[esBienRazonable]{an > 0, \ al > 0, \ (\forall t \leftarrow spaw)sgd(t) \geq 1 \ \land \ sgd(t) \leq al \ \land \ trd(t) \geq 0}
	\asegura[empezasEnTurnoCero]{turno(res) == 0}
	\asegura[tieneTablero]{ancho(res) == an \ \land \ alto(res) == al}
	\asegura[esDiaSoleado]{soles(res) == s}
	\asegura[elTableroEstaVacio]{vampiros(res) == [] \land \ flores(res) == []}
	\asegura[habraEnemigosOrdenados]{mismos(spawning(res),spaw)}
\end{problema}

\begin{problema}{anchoN}{n : Nivel}{\ent}
	\asegura{res==ancho(n)}
\end{problema}

\begin{problema}{altoN}{n : Nivel}{\ent}
	\asegura{res==alto(n)}
\end{problema}

\begin{problema}{turnoN}{n : Nivel}{\ent}
	\asegura{res==turno(n)}
\end{problema}

\begin{problema}{solesN}{n : Nivel}{\ent}
	\asegura{res==soles(n)}
\end{problema}

\begin{problema}{floresN}{n : Nivel}{[(Flor, Posicion, Vida)]}
	\asegura{res==flores(n)}
\end{problema}

\begin{problema}{vampirosN}{n : Nivel}{[(Vampiro, Posicion, Vida)]}
	\asegura{res==vampiros(n)}
\end{problema}

\begin{problema}{spawningN}{n : Nivel}{[(Vampiro, \ent, \ent)]}
	\asegura{res==spawning(n)}
\end{problema}

\begin{problema}{comprarSoles}{n: Nivel, s : \ent}{}
\end{problema}

\begin{problema}{obsesivoCompusilvo}{n: Nivel}{\bool}
\end{problema}

\begin{problema}{agregarFlor}{n: Nivel, f : Flor, p : Posicion}{}
\end{problema}

\noindent\aux{terminado}{n: Nivel}{\bool}{}

\begin{problema}{pasarTurno}{n: Nivel}{}{
	\modifica{n}
	\requiere[noEsElFin]{terminado(n) == False}
	\asegura[graciasPachamama]{soles(n)==soles(pre(n))+1+ \newline |[1 | j \in flores(n), Generar \in habilidadesF(j_1)]| * (turno(pre(n))+1)}
	\asegura[soloPasaUnTurno]{turno(n) == turno(pre(n))+1}
	\asegura[lasFloresSeMarchitan1]{(\forall k \in flores(n))(\exists f \in flores(pre(n)))k==f \lor \newline (k_1==f_1 \land k_2==f_2 \land k_3 == f_3 - \sum[cuantoPegaV(v_1) \ | v \in vampiros(pre(n)), \ v_2==f_2] }
	%\asegura[lasFloresSeMarchitan2]{(\forall f \in flores(pre(n)))(\exists v \in vampiros(pre(n)), f_2==v_2 \land \newline (f_3 - \sum[cuantoPegaV(v_1) \ | v \in vampiros(pre(n)), \ v_2==f_2]) > 0) \land Explotar \notin habilidadesF(f_1)) f \in flores(n)}
	\asegura[lasQueChocanExplotan]{(\not\exists k \in flores(pre(n)), v \in vampiros(pre(n)), k_2==v_2 \ \land \ Explotar \in habilidadesF(k_1)) \newline k \in flores(n)}
	\asegura[losVampirosTambienSufren]{(\forall t \in vampiros(n))(\exists v \in vampiros(pre(n)))t == v \lor \newline (t_1 == v_1 \land t_2 == v_2 \land t_3 == v_3 - \sum [cuantoPegaF(f) | f \in flores(pre(n)), f_{2,1}==v_{2,1} \ \lor \newline (f_{2,2} \leq v_{2,2} \land noHayVampirosEnElMedio(v, f, pre(n))] \land t_3 > 0)}
	 
	 %Hay que preguntar como distinguir entre vampiros iguales y flores iguales, porque la auxiliar que hay no alcanza
	
		
}
\end{problema}




\section{Juego}
\input{tipos/juego.tex}

\begin{problema}{floresJ}{j: Juego}{[Flor]}
	\asegura{res==flores(j)}
\end{problema}

\begin{problema}{vampirosJ}{j: Juego}{[Vampiro]}
	\asegura{res==vampiros(j)}
\end{problema}

\begin{problema}{nivelesJ}{j: Juego}{[Nivel]}
	\asegura{res==niveles(j)}
\end{problema}

\begin{problema}{agregarNivelJ}{j: Juego, n: Nivel, i: \ent}{}
	\requiere {turno(n)==0}
	\requiere {|flores(n)|==0}
	\requiere {|vampiros(n)|==0}
	\requiere {i\geq 0}
	\requiere {i \leq |niveles(pre(j))|}
	\modifica {j}
	\asegura {(\forall k \leftarrow [0..i)) niveles(j)_k == niveles(pre(j))_k}
	\asegura {niveles(j)_i == n}
	\asegura {(\forall k \leftarrow (i..|niveles(j)|)) niveles(j)_k == niveles(pre(j))_{k-1})}
	\asegura {flores(j)==flores(pre(j))}
	\asegura {vampiros(j)==vampiros(pre(j))}	
\end{problema}

\begin{problema}{estosSalenFacil}{j: Juego}{[Nivel]}
\end{problema}

\begin{problema}{jugarNivel}{j: Juego, n: Nivel, i: \ent}{}
\end{problema}

\begin{problema}{altoCheat}{j: Juego, i: \ent}{}
\end{problema}

\begin{problema}{muyDeExactas}{j: Juego}{\bool}
	\asegura{listaNivelesGanados(j) == fibonacci(|listaNivelesGanados(j)|)}
	
\end{problema}

\section{Auxiliares}
\aux{vidaFloresOk}{fs: [(Flor, Posicion, Vida)]}{\bool}{(\forall f \selec fs) trd(f) > 0 \land trd(f) \leq vida(prm(f))}
\aux{vidaVampirosOk}{fs: [(Vampiro, Posicion, Vida)]}{\bool}{(\forall f \selec fs) trd(f) > 0 \land trd(f) \leq vida(prm(f))}
\aux{floresIguales}{x, y : Flor}{\bool}{mismos(habilidades(x), habilidades(y))}
\aux{cuenta}{x: T, a: [T]}{Int}{|[y | y  \in  a, y == x]|}
\aux{mismos}{a, b : [T]}{\bool}{(|a| == |b| \land (\forall c \in a) cuenta(c,a) == cuenta(c,b))}
\aux{sinRepetidos}{xs : [T]}{\bool}{(\forall i, j \leftarrow [0..|xs|), \ i \neq j) xs_i \neq xs_j}
\aux{noHayVampirosEnElMedio}{v : (Vampiro, Posicion, Vida), f : (Flor, Posicion, Vida), n : Nivel}{\bool}{(\not\exists k \in vampiros(n))k_{2,2} \geq f_{2,2} \land k_{2,2} < v_{2,2}}
\aux{nivelGanado}{n:Nivel}{\bool}{vampiros(n)==\lvacia}
\aux{listaNivelesGanados}{j: Juego}{[\ent]}{[i \ | \ i \in [0..|nivelesJ(j)|), nivelGanado(nivelesJ(j)_i)]}
\aux{fibonacci}{t: \ent}{[\ent]}{[\frac{\phi^{n} - (1-\phi)^{n}}{\sqrt{5}} \ | \ n \in [1..t]]}
\end{document}

